<%-include('./includes/head.ejs')%>
<style>
.hover:hover{
    color:#800060;
    border-bottom: 1px solid #800060
    
}
.hover{
    color: blue;
    border-bottom: 1px solid blue
   
}

</style>
<script src="/js/test.js"></script>
<script src="/css/Btest.js"></script>
</head>

<body>
    <!--[if lt IE 8]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->
    <!-- Start Left menu area -->
    <%-include('./includes/sidebar.ejs')%>
    <!-- End Left menu area -->

    <!-- Start Welcome area -->
    <!-- header--------------------------->
   <%-include('./includes/header.ejs')%>
   
    <!-- Start main section -->
    <div style="margin:auto;width:80%;margin-bottom: 30%">
        <form action="/newClass" method="POST"  class="product-form" >
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-12">
                <div class="sparkline9-list responsive-mg-b-30">
                    <div class="sparkline9-hd">
                        
                    </div>
                    <div class="sparkline9-graph">
                        <div class="basic-login-form-ad">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                   
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="basic-login-inner">
                                        
                                      
                                            <div class="form-group-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                        <label class="login2">Department</label>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                        <select id="depname" class="form-control">
                                                            <%for(d of department){%>
                                                            <option name="depname"><%=d.depname%></option>
                                                            <%}%>
                                                        </select>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group-inner">
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                            <label class="login2">Time</label>
                                                        </div>
                                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                            <input type="radio" name="time" id="time" value="Am" checked>Am
                                                            <input type="radio" name="time" id="time" value="Pm" >Pm
                                                            <!-- <input type="email" class="form-control"  name="time" id="time" /> -->
                                                        </div>
                                                    </div>
                                                </div>
                                            
                                            <div class="form-group-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                        <label class="login2">Day</label>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                            <input type="radio" name="day" id="day" checked>Odd
                                                            <input type="radio" name="day" id="day" >Even
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                        <label class="login2">Name</label>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                        <select class="form-control" id="name">
                                                            <option  name="name" selected>A</option>
                                                            <option  name="name" >B</option>
                                                            <option  name="name" >C</option>
                                                            <option  name="name" >D</option>
                                                            <option  name="name" >E</option>
                                                            <option  name="name" >G</option>
                                                            <option  name="name" >H</option>
                                                            <option  name="name" >I</option>
                                                            <option  name="name" >J</option>
                                                            <option  name="name" >K</option>
                                                            <option  name="name" >L</option>
                                                            <option  name="name" >M</option>
                                                            <option  name="name" >N</option>
                                                            <option  name="name" >O</option>
                                                            <option  name="name" >P</option>
                                                            <option  name="name" >Q</option>
                                                            <option  name="name" >R</option>
                                                            <option  name="name">S</option>
                                                            <option  name="name">T</option>
                                                            <option  name="name">U</option>
                                                            <option  name="name">V</option>
                                                            <option  name="name">W</option>
                                                            <option  name="name">X</option>
                                                            <option  name="name">Y</option>
                                                            <option  name="name">Z</option>
                                                            
                                                        </select>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                        <label class="login2">Year</label>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                        <input type="text" class="form-control"  name="year" id="year" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                                                        <label class="login2">Month</label>
                                                    </div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                        <input type="text" class="form-control"  name="month" id="month" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="login-btn-inner">
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12"></div>
                                                    
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12"></div>
                                                    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
                                                        <div class="login-horizental">
                                                            <button class="btn" type="button" onclick="postDatadp(this)">Submit</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        </form>
    </div>
    <table id="tableData" style="width: 100%"> 
        <thead>
            <tr>
                <th>Number</th>
                <th>Department</th>
                <th>Time</th>
                <th>Day</th>
                <th>Name</th>
                
                <th>Month</th>
                <th>Year</th>
            </tr>
        </thead>


        <tbody>
            <%
            if(classs.length>0){
                let i=0;
                for(d of classs){
                    i++
                    %>
                    <tr>
                        <td><%=i%></td>
                        <td name="depname"><%=d.depname %></td>
                        <td name="year"><%=d.time %></td>
                        <td name="day"><%=d.day %></td>
                        <td name="name"><%=d.name%></td>
                        <td name="month"><%=d.month%></td>
                        <td name="year"><%=d.year%></td>
                        <td>
                            <input type="hidden" name="recordId" value="<%= d._id %>">
                            <button   data-toggle="modal" data-target="#editModal" data-whatever="<%= [d._id, d.depname, d.year, d.month] %>" onclick="returnRowToEdit(this)">Edit</button>
                            <button id ="sample"   data-toggle="modal" data-target="#exampleModal" data-whatever="<%= d._id %>" onclick="returnRowToDelete(this)">Delete</button>
                        </td>
                        
                    </tr>
                    <%
                  }
              }
              %>   
        </tbody>
    </table>
    <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Change</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form>
                    <div class="form-group">
                      <input type="hidden" id="id" name="id" class="form-control" >
                      <input type="text" id="depname" name="depname" class="form-control" >
                      <input type="text" id="time" name="time" class="form-control" >
                      <input type="text" id="day" name="day" class="form-control" >
                      <input type="text" id="name" name="name" class="form-control" >
                      <input type="text" id="month" name="month" class="form-control" >
                      <input type="text" id="year" name="year" class="form-control" >
                      
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" onClick="editData(this)" data-dismiss="modal">Yes</button>
                </div>
              </div>
            </div>
          </div>
  
         
          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form>
                    <div class="form-group">
                      <h2 class="col-form-label">Are you sure to delete record?</h2>
                      <input type="hidden" class="form-control" name="recipientName" id="recipientName">
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary" onClick="postDelete(this)" data-dismiss="modal">Yes</button>
                </div>
              </div>
            </div>
          </div>
 
</div>
    
     <!-- end of mainsection -->
       
    <!-- footer------------------------------>
    <%-include('./includes/footer.ejs')%>
       
    </div>
    <script>
        $('#exampleModal').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget) // Button that triggered the modal
          var recipient = button.data('whatever') // Extract info from data-* attributes
          var modal = $(this)
          modal.find('.modal-body input').val(recipient)
        })
        
        $('#editModal').on('show.bs.modal', function (event) {
          var button = $(event.relatedTarget) // Button that triggered the modal
          var recipient = button.data('whatever') // Extract info from data-* attributes
          var modal = $(this)
          
          var arrayData = recipient.split(',');
          // console.log(arrayData)
          modal.find('.modal-body #id').val(arrayData[0]);
          modal.find('.modal-body #depname').val(arrayData[1]);
          modal.find('.modal-body #year').val(arrayData[2]);
          modal.find('.modal-body #month').val(arrayData[3]);
        })
        </script>
    <script src="/js/class.js"></script>
    <%-include('./includes/end.ejs')%>
